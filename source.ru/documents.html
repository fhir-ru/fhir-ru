<!DOCTYPE HTML>


<!--
Outstanding issues:
- relationships 
- representation

-->
     
[%settitle FHIR-документы%]
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
[%file newheader%]
</head>
<body>
[%file newnavbar%]

<div class="col-9">

<h1>FHIR-документы</h1>

<p>
FHIR-ресурсы могут быть использованы для построения документов, которые представляют композицию: набор согласованной информации, которая является утверждением информации о здравоохранении, в частности включая клинические обследования и службы. 
Документ - это иммутабельный набор ресурсов с фиксированным представлением, который создан и/или заверен людьми, организациями и устройствами. 
</p>
<p>
Документами, построенными таким способом, можно обмениваться между системами и также сохранять в хранилище документов и системах управления, включая такие системы, как IHE XDS. 
</p>
<p>
Приложения, заявляющие о соответствии этому фреймворку, заявляют о соответствии "FHIR-документам".
</p>
<p>
FHIR-документы могут быть 'клиническими' (направленными на медицинскую информацию о пациенте), а также могут служить не клиническим целям (например FHIR Implementation guides, практические руководства, наглядные материалы для пациентов и т. п.). HL7 будет разрабатывать профили в будущем, давая дополнительное руководство по подходящему представлению клинических документов как в общем, так и в частных случаях клинических документов (например Consolidated CDA).
</p>

<p>
Обратите внимание, что FHIR устанавливает и формат этого документа, и <a href="documentreference.html">ресурс ссылки на документы (document reference resource)</a>. 
FHIR-документы - для документов, которые созданы и собраны в FHIR, а ресурс ссылки на документы - для общих ссылок на pre-existing документы. 
</p>
<ul>
 <li><a href="document-example-dischargesummary.html">Example discharge summary</a>: <a href="document-example-dischargesummary.xml.html">XML</a> or <a href="document-example-dischargesummary.json.html">JSON</a></li>
</ul>

<h2>Содержимое документа</h2>

<p>
Все документы имеют одинаковую структуру: a <a href="bundle.html">комплект ресурсов (Bundle)</a> 
 <a href="bundle-definitions.html#Bundle.type">типа</a> "document"
с ресурсом <a href="composition.html">Composition</a> в качестве первого ресурса в комплекте, за которым следует серия других ресурсов, на которые имеются ссылки из ресурса <i>Composition</i>, который содержит правила, по которым они согласовываются между собой. Комплект собирает всё содержимое документа в единый XML или JSON-документ, который может быть подписан и администрирован по мере надобности. Ресурсы включают в себя и человекочитаемые, и обрабатываемые компьютером блоки. Кроме того, комплект может включать в себя <a href="http://www.w3.org/Style/CSS/Overview.en.html">каскадные таблицы стилей</a>, заявления о 
<a href="provenance.html">происхождении (provenance statements)</a> и цифровую подпись.
</p>
<p>
Ресурс Composition является основой клинического документа. Он:
</p>
<ul>
 <li>содержит именование и назначение, устанавливает контекст документа;</li>
 <li>несет ключевую информацию, такую как объект и автор, и кто утвердил документ;</li>
 <li>делит документ на серию разделов, которые содержат другие ресурсы, обозначенные в этой спецификации, которые несут содержимое.</li>
</ul> 
<p>
Любой ресурс, на который есть прямая ссылка из Composition, ДОЛЖЕН быть включен в комплект во время сборки документа. Другие ресурсы, на которые ссылаются эти ресурсы, могут также быть включены в комплект, если такое решение примет система построения документа. Включение этих дополнительных ресурсов сделает документ больше, однако убережет приложения от необходимости получения связанных ресурсов, если они понадобятся им во время обработки документа. Таким образом решение о том, должны связанные ресурсы быть включены или нет, зависит от среды реализации. 
</p>
<p>
Комплект документов ДОЛЖЕН включать ресурсы только из этого списка:
</p>
<ol>
 <li>Ресурс Composition и любые ресурсы, на которые есть прямая или косвенная (например рекурсивная) ссылка из него.</li>
 <li>Ресурс Binary, содержащий таблицу стилей (как описано выше).</li>
 <li>Provenance-ресурсы, у которых есть цель, которая является ресурсом, включенным в пункт №1.</li>
</ol>
<p>
У документа имеется два ключевых идентификатора:
</p>
<ul>
 <li>Идентификатор документа (обязательный). Он находится в <i>Bundle.id</i> и является уникальным для этого экземпляра документа и никогда не используется повторно. </li>
 <li>Структурный идентификатор (необязательный). Он находится в <i>Composition.identifier</i>и является одинаковым для всех документов, содержащихся в композиции. </li> 
</ul>

<p>
В документе указывается несколько дат:
</p>
<ul>
 <li>Дата документа (обязательно). Она находится в <i>Bundle.meta.lastUpdated</i> и указывает, когда комплект документа был собран из лежащих в его основе ресурсов.</li>
 <li>Дата композиции (обязательно). Находится в <i>Composition.date</i>, это дата, когда автор написал документ логически.</li> 
 <li>Даты утверждения (необязательно). Находится в <i>Composition.attester.time</i> , это дата, когда документ был засвидетельствован очевидцами. Обычно это будет то же самое время, что и дата композиции, либо позднее.</li> 
 <li>Дата последнего изменения композиции (необязательно). Находится в <i>Composition.meta.lastUpdated</i> для композиции, и является датой последнего изменения композиции. Она должна быть &gt;= дате композиции.</li> 
</ul>
<p>
Комплекты документов могут быть подписаны электронными цифровыми подписями в соответствии с правилами, выложенными на странице <a href="signatures.html">цифровые подписи</a>. 
Подпись ДОЛЖНА быть поставлена очевидцем из списка в документе и подпись ДОЛЖНА содержать элемент <a href="http://www.w3.org/TR/xmldsig-core/#sec-KeyInfo" target="_blank">KeyInfo</a>, содержащий элемент KeyName, значением которого является URI, совпадающий с bundle-элементом <i>base</i> + значение элемента <i>resource.id</i> для соответствующего attester-ресурса.
</p>
<p>
Однажды собранный в комплект, документ становится иммутабельным - его содержимое больше не может быть изменено, а id документа не может быть повторно использован. Обратите внимание, что документ может быть представлен в XML либо JSON-формате, конвертироваться между ними или менять кодировку символов, и при этом оставаться тем же самым документом. Однако содержимое (набор утвержденных ресурсов и их порядок) и представление документа не могут быть изменены. Все дополнительные документы, вытекающие из одной композиции, ДОЛЖНЫ иметь различные идентификаторы документа. 
</p>

<a name="presentation"> </a> 
<h3>Представление документа</h3>
<p>
Когда документ представляют человеку, приложения должны показать объединенные описательные части следующих ресурсов в таком порядке:
</p>
<ol>
 <li>Ресурс Composition </li>
 <li>Ресурс Subject </li>
 <li>Ресурсы <a href="list.html">List</a>, на которые ссылаются непосредственно в <i>section.content</i></li>
</ol>
<p>
The presentation of the document is called the 'attested content' of the document. Additional
resources can be included in the bundle (e.g. the resources that the Lists for the section.content
SHOULD be in the bundle, and other additional resources they reference can be included), but these are not 
attested content. Specifically, the Composition.attester attests to the presented form of the document.
</p>
<p>
Описательная часть ресурса Composition должна суммировать важные части заголовка документа, которые требуются для установления клинического контекста документа (отличного от субъекта, который отображается сам по себе (in its own right). Фактически чтобы построить скомбинированную описательную часть, просто склейте все описательные &lt;div&gt;-фрагменты вместе. <!-- todo: title -->
</p>
<p>
<a href="downloads.html#refimpl">XML Tools reference implementation</a> включает в себя XSLT-преобразование, конвертирующее документ в XHTML, готовый для показа в браузере.
</p>


<a name="css"></a>
<p>
В дополнение к <a href="narrative.html#css">базовым правилам оформления описательной части</a>, которые должны соблюдаться, документ может ссылаться или содержать один или больше таблиц стилей, включающих дополнительные стили, применяемые к объединенным описательным частям. Это достигается объявлением ссылок на таблицы стилей в фиде:
</p>
<pre class="xml">
&lt;Bundle xmlns=&quot;http://hl7.org/fhir&quot;&gt;  
  &lt;!-- metadata and type --&gt;
  &lt;link&gt;
    &lt;relation value=&quot;stylesheet&quot;/&gt;
    &lt;url value=&quot;[uri]&quot;/&gt;
  &lt;/link&gt;
&lt;/Bundle&gt;  
</pre>
<p>
Этот URI может быть абсолютной ссылкой на каскадную таблицу стилей или относительной ссылкой на бинарный ресурс, содержащий CSS-таблицу. Ссылки на таблицы стилей могут ссылаться только на CSS - другие формы таблиц стилей не допустимы.
</p>
<p>
Относительные (внутренние) ссылки ДОЛЖНЫ использоваться, если документ не безопасно просматривать без применения указанной таблицы стилей, т. к. другой адрес может быть не доступен просмотрщику из-за технических проблем или решений политики безопасности [policy decisions].
</p>
<p>
Any stylesheet referenced or used SHALL NOT alter the presentation in such a way 
that it changes the clinical meaning of the content. 
</p>
<p>
Если другое не указано в локальных торговых партнерских соглашениях, приложения, отображающие объединенную описательную часть, ДОЛЖНЫ использовать таблицы стилей, указанные в документе. Сторонам, входящие в торговое соглашение, поступающим иначе, следует очень тщательно рассмотреть последствия, которые  это действие будет иметь на их долгосрочную область действия обмена документом. Если стороны согласны использовать таблицы стилей, не содержащиеся в документе, тогда, возможно, они никогда не смогут совместно использовать свои документы безопасно в более широком контексте, таком как региональные или национальные EHR или глобальные персональные медицинские документы. 
</p>


<h2>Профили документов</h2>

<p>
<a href="profiling.html">Профили документов</a> используются для описания документов конкретного назначения. Профили документов могут вводить правила о:
</p>
<ul>
 <li>Содержимом ресурса Composition, в том числе</li>
 <li>Структуре разделов в композиции</li>
 <li>Какие ресурсы должны быть включены в комплект наряду с ресурсами, на которые есть прямые ссылки в ресурсе Document</li>
</ul> 
<p>
Приложениям следует рассмотреть публикацию <a href="conformance.html">заявлений о соответствии</a>, в которых указываются конкретные документы, которые они поддерживают. Документы могут указывать профиль, которому они соответствуют, с помощью размещения тега профиля в элементе <i>feed.category</i> - см. <a href="resource.html#meta">Теги профилей [Profile Tags]</a> для обсуждения их использования.
</p>


<h2>Обязательства при обработке документов</h2>
<p>
Авторы/конструкторы и обработчики Клинических документов - люди или программное обеспечение - имеют обязательства, которым они должны соответствовать.
</p>

<h3>Обязательства автора/конструктора</h3>
<p>
Конструктор документа - это приложение, которое создает документ. Автор - это человек, организация или устройство, использующее конструктор для создания документа. Между собой, конструктор и автор могут создавать новые контент-ресурсы и/или делать сборки из уже существующих контент-ресурсов при выполнении своих задач. Также у них есть следующие обязанности:
</p>
<ul>
 <li>Гарантировать, что документ ДОЛЖЕН содержать допустимую композицию, которая соответствует правилам, описанным здесь, и ссылается только на другие допустимые ресурсы.</li>
 <li>Гарантировать, что содержимое документа ДОЛЖНО соответствовать всем объявленным <a href="profiling.html">Профилям</a> (см. ниже).</li>
 <li>Ручаться, что свидетели должным образом ознакомлены с представлением документа, который они заверяют.</li>
</ul>

<h3>Обязательства обработчика</h3>
<p>
Обработчик документа - это приложение и/или человек-пользователь, который получает документы и извлекает данных из них или принимает решения на их основе. Эти документы могут быть получены прямо из конструктора документов, доступного через систему управления документами или переадресованного третьей стороной. Обработчик документов обеспечивает гарантию того, что полученные документы обработаны и/или отображены в соответствии с данной спецификацией. Обработчик документов обязан гарантировать соблюдение следующих правил:
</p>
<ul>
 <li>При сохранении/передаче документа любой метод может быть использован, пока документ комплекта может быть (пере)собран с достаточной целостностью для подтверждения достоверности цифровой подписи. </li>
 <li>При представлении описательной части документа ДОЛЖНЫ быть соблюдены правила, описанные выше.</li>
 <li>Ресурсы или данные из документа могут быть извлечены в дополнительных целях, однако такие данных больше не рассматриваются как заверенные автором документа.</li>
 <li>Показываются ли данные из документа пользователю, ДОЛЖЕН всегда быть способ для пользователей получить доступ к представлению оригинального документа.</li>

</ul>
<p>
В дополнение к этим обязательствам, получатели документа СЛЕДУЕТ тщательно отслеживать источник документов за новыми документами, которые могут заменять существующие документы, в частности когда документы представляют композиции, которые были сокращены. Когда документы заменяются, они ДОЛЖНЫ либо отозвать данные, извлеченные из замененных документов, либо предупреждать пользователей при просмотре документа или данных, взятых из него.
</p>

<a name="bundle"> </a>
<h2>Конечные точки документа (Document End-Points)</h2>

<p>
Имеется несколько разных RESTful конечных точек, используемых при работе с документами. Использование различных конечных точек лучше всего описать, рассматривая последствия отправки сообщений на них:
</p>
<table class="grid">
 <tr> <td><b>End-Point</b></td> <td><b>Тип содержимого</b></td> <td><b>Описание</b></td> </tr>
 <tr> <td>[baseurl]/Bundle</td> <td>Document Bundle</td> <td>Это работает так же как и обычная точка взаимодействия для управления типом ресурса, но только с целыми комплектами (bundles) документов - т. е. операция чтения возвращает bundle, обновление получает bundle и поиск возвращает комплект комплектов (bundle of bundles).</td> </tr>
   
 <tr> <td>[baseurl]/Composition</td> <td>Composition Resource</td> <td>Обычная точка взаимодействия для управления ресурсами композиции. Она может использоваться во время комплектации документа, после разбиения документа на составные ресурсы или во время использования композиций отдельно от документов.</td> </tr>
   
 <tr> <td><a href="compartments.html#binary">[baseurl]/Binary</a></td> <td>Document Bundle</td> <td>Просто сохраняет весь документ в виде последовательности байтов и по запросу возвращает точно эту самую последовательность. Нет способа обнаружить содержимое в конечной точке /Binary, поэтому обычно это ассоциируется с <a href="documentreference.html">Document Reference</a>, чтобы приложения могли найти и обработать документ, хотя это и не обязательно.</td> </tr>
   
 <tr> <td><a href="http.html#transaction">[baseurl]</a> (e.g. a transaction)</td> <td>Document Bundle</td> <td>Игнорирует факт, что комплект - это документ, и обрабатывает все ресурсы, которые он содержит как самостоятельные ресурсы. Клиентам НЕ СЛЕДУЕТ ожидать, что сервер, который получает документ, отправленный с помощью этого метода, будет в состоянии пересобрать документ точно. (Даже если сервер может пересобрать документ (см. ниже), нельзя ожидать, что результат будет в том же порядке и т. п. Соответственно, подпись документа, весьма вероятно, станет недействительной.</td> </tr>
   
 <tr> <td><a href="messaging.html#mailbox">[baseurl]/$mailbox</a></td> <td>Document Bundle</td> <td>Отправляет документ на сервер для обработки. Конкретный метод обработки, который совершает сервер, является свободным выбором сервера. Он МОЖЕТ совершить одно или более из этих действий:
  <ul>
    <li>Переслать документ еще куда-то.</li>
    <li>Разбить его на самостоятельно доступные ресурсы и сделать их доступными через RESTful-интерфейс.</li>
    <li>Сохранить документ в его бинарной форме и сделать его доступным по /Binary и, возможно, также создать DocumentReference.</li>
  </ul>
  Сервер не обязан обрабатывать документ каким-то определенным образом. Клиент не знает, какой действие предпримет сервер, только что сервер принял ответственность за документ.
  <br/><br/>
  Профили реализации должны быть внимательны при определении правил о том, что случается, когда документ отправляется в почтовый ящик (mailbox), так как легко принять такие правила, что сервер не сможет соответствовать более чем одному профилю одновременно.
  </td> </tr>
</table>

<p>
Примечание: Несмотря на то, что эти конечные точки определены для использования с ресурсами документа и комплектами документов, их использование не обязательно. Документы можно передавать между системами с помощью любого желаемого способа.
</p>

<h3>Генерация документа</h3>
<p>
Клиент может попросить сервер сгенерировать полностью скомплектованный документ из ресурса composition. Более подробную информацию см. на странице <a href="composition-operations.html">Generate Document Operation</a>.
</p>



</div>

[%file newfooter%]
    
    
</body>
</html>








